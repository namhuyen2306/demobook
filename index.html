<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Book Store</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 text-gray-800">
    <nav class="bg-white shadow p-4 flex justify-between items-center">
      <h1 class="text-4xl font-bold text-indigo-600">BookStore</h1>
      <div class="space-x-4">
        <input
          type="text"
          id="searchInput"
          placeholder="TÃ¬m kiáº¿m"
          oninput="filterBooks()"
          class="border px-2 py-1 rounded text-sm"
        />
        <button
          onclick="toggleModal('loginModal')"
          class="text-sm text-indigo-600 hover:underline"
        >
          ÄÄƒng nháº­p
        </button>
        <button
          onclick="toggleModal('registerModal')"
          class="text-sm text-indigo-600 hover:underline"
        >
          ÄÄƒng kÃ½
        </button>
        <button onclick="toggleCart()" class="relative">
          ğŸ›’
          <span
            id="cart-count"
            class="bg-red-500 text-white text-xs px-1 rounded-full absolute -top-2 -right-2"
            >0</span
          >
        </button>
      </div>
    </nav>

    <div class="bg-white shadow p-4 flex items-center gap-4">
      <label class="font-semibold">Thá»ƒ loáº¡i:</label>
      <select
        id="categorySelect"
        onchange="filterBooks()"
        class="border rounded px-2 py-1 text-sm"
      >
        <option value="Táº¥t cáº£">Táº¥t cáº£</option>
        <option value="VÄƒn há»c">VÄƒn há»c</option>
        <option value="Ká»¹ nÄƒng">Ká»¹ nÄƒng</option>
        <option value="Khoa há»c">Khoa há»c</option>
        <option value="TiÃªn hiá»‡p">TiÃªn hiá»‡p</option>
        <option value="Kinh dá»‹">Kinh dá»‹</option>
      </select>
      <label class="font-semibold ml-4">GiÃ¡:</label>
      <select
        id="priceSelect"
        onchange="filterBooks()"
        class="border rounded px-2 py-1 text-sm"
      >
        <option value="all">Táº¥t cáº£</option>
        <option value="low">&lt; 100.000â‚«</option>
        <option value="medium">100.000â‚« â€“ 150.000â‚«</option>
        <option value="high">&gt; 150.000â‚«</option>
      </select>
    </div>

    <!-- Book List -->
    <section
      id="bookList"
      class="p-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"
    >
      <!-- render sÃ¡ch báº±ng JS -->
    </section>

    <!-- Login -->
    <div
      id="loginModal"
      class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden"
    >
      <div class="bg-white rounded-lg p-6 w-full max-w-sm">
        <h2 class="text-xl font-semibold mb-4">ÄÄƒng nháº­p</h2>
        <form method="POST" action="login.php"></form>
        <input
          type="email"
          placeholder="Email"
          class="w-full mb-2 p-2 border rounded"
        />
        <input
          type="password"
          placeholder="Máº­t kháº©u"
          class="w-full mb-4 p-2 border rounded"
        />
        <button class="bg-indigo-600 text-white px-4 py-2 rounded w-full">
          ÄÄƒng nháº­p
        </button>
        <button
          onclick="toggleModal('loginModal')"
          class="mt-2 text-sm text-gray-500 hover:underline w-full"
        >
          ÄÃ³ng
        </button>
      </div>
    </div>

    <!-- Register -->
    <div
      id="registerModal"
      class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden"
    >
      <div class="bg-white rounded-lg p-6 w-full max-w-sm">
        <h2 class="text-xl font-semibold mb-4">ÄÄƒng kÃ½</h2>
        <form method="POST" action="register.php"></form>
        <input
          type="text"
          placeholder="Há» vÃ  tÃªn"
          class="w-full mb-2 p-2 border rounded"
        />
        <input
          type="email"
          placeholder="Email"
          class="w-full mb-2 p-2 border rounded"
        />
        <input
          type="password"
          placeholder="Máº­t kháº©u"
          class="w-full mb-4 p-2 border rounded"
        />
        <button class="bg-indigo-600 text-white px-4 py-2 rounded w-full">
          ÄÄƒng kÃ½
        </button>
        <button
          onclick="toggleModal('registerModal')"
          class="mt-2 text-sm text-gray-500 hover:underline w-full"
        >
          ÄÃ³ng
        </button>
      </div>
    </div>

    <!-- Cart -->
    <div
      id="cart"
      class="fixed right-0 top-0 w-72 bg-white shadow h-full p-4 hidden"
    >
      <h2 class="text-lg font-bold mb-4">Giá» hÃ ng</h2>
      <ul id="cart-items" class="space-y-2 text-sm"></ul>
      <button
        onclick="toggleCart()"
        class="mt-4 text-indigo-600 hover:underline"
      >
        ÄÃ³ng
      </button>
    </div>

    <!-- JavaScript -->
    <script>
      const books = [
        {
          name: "xÃ­ch tÃ¢m tuáº§n thiÃªn",
          price: "100.000â‚«",
          category: "Ká»¹ nÄƒng",
          img: "https://picsum.photos/150?random=1",
        },
        {
          name: "náº¯ng mÃ¹a thu",
          price: "100000â‚«",
          category: "VÄƒn há»c",
          img: "https://picsum.photos/150?random=2",
        },
        {
          name: "tuá»•i xáº¿ chiá»u",
          price: "150.000â‚«",
          category: "Khoa há»c",
          img: "https://picsum.photos/150?random=3",
        },
        {
          name: "kÄ© nÄƒng sá»‘ng",
          price: "120.000â‚«",
          category: "Ká»¹ nÄƒng",
          img: "https://picsum.photos/150?random=4",
        },
        {
          name: "hoa cá» may",
          price: "80.000â‚«",
          category: "VÄƒn há»c",
          img: "https://picsum.photos/150?random=5",
        },
        {
          name: "sau bÃ³ng lÆ°ng",
          price: "100000â‚«",
          category: "Ká»¹ nÄƒng",
          img: "https://picsum.photos/150?random=6",
        },
        {
          name: "tiÃªn nghá»‹ch",
          price: "150000â‚«",
          category: "tiÃªn hiá»‡p",
          img: "https://picsum.photos/150?random=7",
        },
        {
          name: "tÃ³c hoa rÃ¢m",
          price: "150000â‚«",
          category: "VÄƒn há»c",
          img: "https://picsum.photos/150?random=8",
        },
        {
          name: "trong Ä‘Ãªm tá»‘i",
          price: "150000â‚«",
          category: "Kinh dá»‹",
          img: "https://picsum.photos/150?random=9",
        },
      ];

      let cart = [];

      function toggleModal(id) {
        document.getElementById(id).classList.toggle("hidden");
      }

      function toggleCart() {
        document.getElementById("cart").classList.toggle("hidden");
      }

      function addToCart(bookName) {
        const book = books.find((b) => b.name === bookName);
        if (book) {
          cart.push({ name: book.name, price: book.price });
          document.getElementById("cart-count").textContent = cart.length;
          renderCart();
        }
      }

      function removeFromCart(index) {
        cart.splice(index, 1);
        document.getElementById("cart-count").textContent = cart.length;
        renderCart();
      }

      function renderCart() {
        const list = document.getElementById("cart-items");
        list.innerHTML = "";

        cart.forEach((item, index) => {
          const li = document.createElement("li");
          li.className = "flex justify-between items-center border-b pb-1";
          li.innerHTML = `
      <div>
        <strong>${item.name}</strong><br>
        <span class="text-sm text-gray-600">${item.price}</span>
      </div>
      <button onclick="removeFromCart(${index})" class="text-red-500">âŒ</button>
    `;
          list.appendChild(li);
        });

        const total = calculateTotal();
        const totalElement = document.createElement("li");
        totalElement.className = "mt-4 font-semibold text-right";
        totalElement.innerHTML = `Tá»•ng cá»™ng: ${total.toLocaleString("vi-VN")}â‚«`;
        list.appendChild(totalElement);
      }

      function parsePrice(priceStr) {
        return parseInt(priceStr.replace(/\D/g, ""));
      }

      function calculateTotal() {
        return cart.reduce((sum, item) => sum + parsePrice(item.price), 0);
      }

      function renderBooks(bookArray) {
        const container = document.getElementById("bookList");
        container.innerHTML = "";
        bookArray.forEach((book) => {
          const card = document.createElement("div");
          card.className =
            "bg-white shadow rounded-lg p-4 flex flex-col items-center";
          card.innerHTML = `
          <img src="${book.img}" class="w-32 h-40 object-cover mb-2 rounded" alt="Book">
          <h2 class="font-semibold text-lg">${book.name}</h2>
          <p class="text-sm text-gray-600">GiÃ¡: ${book.price}</p>
          <p class="text-xs text-gray-500 mb-2">Thá»ƒ loáº¡i: ${book.category}</p>
          <button onclick="addToCart('${book.name}')" class="bg-indigo-600 text-white px-4 py-1 rounded hover:bg-indigo-700">ThÃªm vÃ o giá»</button>
        `;
          container.appendChild(card);
        });
      }

      function filterBooks() {
        const keyword = document
          .getElementById("searchInput")
          .value.toLowerCase();
        const category = document.getElementById("categorySelect").value;
        const priceFilter = document.getElementById("priceSelect").value;

        const filtered = books.filter((book) => {
          const nameMatch = book.name.toLowerCase().includes(keyword);
          const categoryMatch =
            category === "Táº¥t cáº£" || book.category === category;

          const priceNum = parseInt(book.price.replace(/\D/g, ""));
          let priceMatch = true;

          if (priceFilter === "low") priceMatch = priceNum < 100000;
          else if (priceFilter === "medium")
            priceMatch = priceNum >= 100000 && priceNum <= 150000;
          else if (priceFilter === "high") priceMatch = priceNum > 150000;

          return nameMatch && categoryMatch && priceMatch;
        });

        renderBooks(filtered);
      }

      renderBooks(books);
    </script>
  </body>
</html>
